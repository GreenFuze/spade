# SPADE Phase-0 Configuration
# This file contains settings for Phase-0 analysis of software repositories

model: gpt-5-nano # LLM model to use for analysis

caps:
  samples:
    max_dirs: 100 # Maximum number of directories to sample per directory
    max_files: 100 # Maximum number of files to sample per directory

  nav:
    max_children_per_step: 0 # Maximum children to navigate to per step (0 = unlimited)

  context:
    max_siblings_in_prompt: 0 # Maximum sibling directories to include in prompt (0 = unlimited)
    max_children_scores_in_prompt: 0 # Maximum child scores to include in prompt (0 = unlimited)
    max_reasons_per_child: 0 # Maximum reasons to include per child (0 = unlimited)
    max_ancestor_summaries: 0 # Maximum ancestor summaries to include (0 = unlimited)

limits:
  max_depth: 0 # Maximum traversal depth (0 = unlimited)
  max_nodes: 0 # Maximum nodes to visit (0 = unlimited)
  max_llm_calls: 0 # Maximum LLM calls to make (0 = unlimited)

scoring:
  weights:
    marker: 0.55 # Weight for marker-based evidence
    lang: 0.25 # Weight for language-based evidence
    name: 0.15 # Weight for name-based evidence
    size: 0.05 # Weight for size-based evidence

  name_signals:
    - api # Keywords that signal API components
    - cli # Keywords that signal CLI components
    - server # Keywords that signal server components
    - service # Keywords that signal service components
    - pkg # Keywords that signal package components
    - src # Keywords that signal source code components
    - web # Keywords that signal web components
    - ui # Keywords that signal UI components
    - infra # Keywords that signal infrastructure components
    - tests # Keywords that signal test components
    - docs # Keywords that signal documentation components

  size_log_k: 200 # Log scaling factor for size-based scoring

policies:
  skip_symlinks: true # Whether to skip symbolic links
  descend_one_level_only: true # Whether to only descend one level at a time
  max_summary_sentences: 3 # Maximum sentences in directory summaries
  max_summary_chars: 400 # Maximum characters in directory summaries
  max_languages_per_node: 6 # Maximum languages to detect per node
  max_tags_per_node: 12 # Maximum tags to assign per node
  max_evidence_per_node: 12 # Maximum evidence items per node

learn_markers: false # Whether to learn new markers from analysis
use_learned_markers: false # Whether to use learned markers
learn_languages: false # Whether to learn new language mappings
use_learned_languages: false # Whether to use learned language mappings
timestamps_utc: true # Whether to use UTC timestamps

marker_learning:
  top_k_candidates: 50 # Number of top candidates to consider for learning
  min_confidence: 0.75 # Minimum confidence threshold for learning
